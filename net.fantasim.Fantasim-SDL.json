{
    "app-id": "net.fantasim.Fantasim-SDL",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "1.6",
    "sdk": "org.freedesktop.Sdk",
    "sdk-extensions": [
        "org.freedesktop.Sdk.Extension.golang"
    ],
    "command": "fantasim-sdl",
    "finish-args": ["--socket=x11", "--share=network", "--device=dri", "--socket=wayland"],
    "build-options": {
        "append-path": "go/bin"
    },
    "cleanup": ["checkout", "go", "go1.10.3.linux-amd64.tar.gz"],
    "modules": [
        {
            "name": "fantasim-sdl",
            "buildsystem": "simple",
            "build-commands": [
                "tar -C . -xzf go1.10.3.linux-amd64.tar.gz",
                "install -D checkout/src/github.com/andreas-jonsson/fantasim-pub/frontends/tools/package/fantasim-sdl.snap/usr/share/applications/fantasim-sdl.desktop /app/usr/share/applications/fantasim-sdl.desktop",
                "install -D checkout/src/github.com/andreas-jonsson/fantasim-pub/frontends/tools/package/fantasim-sdl.snap/usr/local/share/fantasim-sdl/icon256x256.png /app/usr/local/share/fantasim-sdl/icon256x256.png",
                "export GOROOT=$(pwd)/go && export GOPATH=$(pwd)/checkout && go build -o /app/bin/fantasim-sdl checkout/src/github.com/andreas-jonsson/fantasim-pub/frontends/sdl/main.go"
            ],
            "sources": [
                {
                    "type": "file",
                    "only-arches": [
                        "x86_64"
                    ],
                    "url": "https://dl.google.com/go/go1.10.3.linux-amd64.tar.gz",
                    "dest-filename": "go1.10.3.linux-amd64.tar.gz",
                    "sha256": "fa1b0e45d3b647c252f51f5e1204aba049cde4af177ef9f2181f43004f901035"
                },
                {
                    "type": "git",
                    "path": ".",
                    "dest": "checkout/src/github.com/andreas-jonsson/fantasim-pub"
                }
            ]
        }
    ]
}